import{u as C,j as e,H as P,L as E}from"./app-CH_0ZtnS.js";import{A as I,d as o}from"./app-layout-DGrPSwKY.js";import{B as a}from"./index-BPhgqzTc.js";import{I as S}from"./input-GPuPMn74.js";import{L as x}from"./label-CvAvVPtu.js";import{I as j}from"./input-error-CIWTJfMR.js";import{C as T}from"./checkbox-9rf9LkjW.js";import{T as A,a as H,b as f,c as b,d as R,e as v}from"./table-Bc03vXCE.js";/* empty css            */import"./separator-C36cHTq_.js";import"./sheet-B334ULMq.js";import"./index-CvKTl1sP.js";import"./index-DZ6Eq-gp.js";import"./index-DjcZmPqt.js";import"./index-C74OtYUb.js";import"./index-CTTQ2TCl.js";import"./check-AtU5Upbt.js";const z=t=>[{title:"Dashboard",href:"/dashboard"},{title:"Manajemen Peran",href:o.index.url()},{title:`Edit Peran: ${t.name}`,href:o.edit.url(t.id)}],L=["profile.view","profile.update","screening.perform","screening.view-history","screening.view-result"],D=["users.view","users.create","users.edit","users.delete","roles.view","roles.create","roles.edit","roles.delete","permissions.view","risk-levels.view","risk-levels.create","risk-levels.edit","risk-levels.delete","risk-levels.print","risk-factors.view","risk-factors.create","risk-factors.edit","risk-factors.delete","risk-factors.print","rules.view","rules.create","rules.edit","rules.delete","screening-history.view","screening-history.delete","screening-history.print","appearance.edit"];function ee({role:t,permissions:d}){const{data:n,setData:l,put:k,processing:N,errors:p}=C({name:t.name,permissions:t.permissions.map(s=>s.id)}),y=(s,r)=>{l("permissions",r?[...n.permissions,s]:n.permissions.filter(i=>i!==s))},g=s=>{s.preventDefault(),k(o.update.url(t.id))},u=["view","create","edit","delete","print"],h=d.reduce((s,r)=>{const[i,c]=r.name.split(".");return s[i]||(s[i]={}),s[i][c]=r,s},{}),w=s=>s.replace(/-/g," ").replace(/\b\w/g,r=>r.toUpperCase()),m=s=>{const r=d.filter(i=>s.includes(i.name)).map(i=>i.id);l("permissions",r)};return e.jsxs(I,{breadcrumbs:z(t),children:[e.jsx(P,{title:`Edit Peran: ${t.name}`}),e.jsxs("div",{className:"container-admin space-y-8",children:[e.jsx("div",{className:"card p-6 md:p-8 flex items-center justify-between",children:e.jsx("h2",{className:"section-title",children:"Edit Peran"})}),e.jsx("div",{className:"card p-6 md:p-8 space-y-6",children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Nama Peran"}),e.jsx(S,{id:"name",type:"text",className:"mt-1 block w-full",value:n.name,onChange:s=>l("name",s.target.value),required:!0,autoFocus:!0}),e.jsx(j,{message:p.name,className:"mt-2"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(x,{className:"text-lg font-semibold",children:"Manajemen Izin"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(a,{type:"button",variant:"outline",size:"sm",onClick:()=>m(d.map(s=>s.name)),children:"Pilih Semua"}),e.jsx(a,{type:"button",variant:"outline",size:"sm",onClick:()=>l("permissions",[]),children:"Hapus Semua"}),e.jsx(a,{type:"button",variant:"outline",size:"sm",onClick:()=>m(L),children:"Hanya Akses Klien"}),e.jsx(a,{type:"button",variant:"outline",size:"sm",onClick:()=>m(D),children:"Hanya Fitur Admin"})]}),e.jsx("div",{className:"border rounded-md",children:e.jsxs(A,{children:[e.jsx(H,{children:e.jsxs(f,{children:[e.jsx(b,{className:"font-bold",children:"Hak Akses"}),u.map(s=>e.jsx(b,{className:"text-center font-bold capitalize",children:s},s))]})}),e.jsx(R,{children:Object.keys(h).sort().map(s=>e.jsxs(f,{children:[e.jsx(v,{className:"font-medium",children:w(s)}),u.map(r=>{const i=h[s][r];return e.jsx(v,{className:"text-center",children:i?e.jsx(T,{id:`perm-${i.id}`,checked:n.permissions.includes(i.id),onCheckedChange:c=>y(i.id,c===!0)}):null},r)})]},s))})]})}),e.jsx(j,{message:p.permissions,className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(a,{type:"submit",disabled:N,children:"Perbarui Peran"}),e.jsx(a,{asChild:!0,variant:"outline",children:e.jsx(E,{href:o.index.url(),children:"Batal"})})]})]})})]})]})}export{ee as default};
