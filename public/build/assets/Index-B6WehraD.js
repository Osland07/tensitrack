import{j as e,r as o,H as u,d as b,L as f}from"./app-DEelWaAR.js";import{A as N,e as n}from"./app-layout-BXimF_VO.js";import{B as d}from"./index-DiEepVuD.js";import{I as y}from"./input-DOEgp4sU.js";import{A as v,a as k,b as D,c as w,d as S,e as A,f as _,g as C,h as I}from"./alert-dialog-zbhUVmjR.js";/* empty css            */import"./separator-BaYscVpU.js";import"./sheet-3irqClul.js";import"./index-SdnWCtm0.js";import"./index-BWjQVJVW.js";import"./index-jIIpgPKm.js";import"./index-BNuSH1qN.js";const R=({isOpen:t,onClose:l,history:a})=>t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl overflow-hidden w-[calc(100%-40%)] max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-primary text-primary-foreground p-6 rounded-t-lg sticky top-0 z-10 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Detail Riwayat Skrining"}),e.jsx("button",{onClick:l,className:"text-primary-foreground hover:text-white text-3xl leading-none",children:"Ã—"})]}),e.jsx("div",{className:"p-6 flex-grow overflow-y-auto",children:a?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-left",children:[e.jsxs("div",{className:"space-y-2 p-4 border rounded-lg bg-gray-50/50 md:border-r md:border-gray-300 md:pr-6",children:[e.jsx("h4",{className:"font-semibold text-lg pb-2 mb-2 border-b-2 border-primary/50 text-primary",children:"Data Pengguna"}),e.jsxs("div",{className:"grid grid-cols-2 items-center",children:[e.jsx("p",{className:"font-medium",children:"Nama Pengguna:"}),e.jsx("p",{children:a.user.name})]}),e.jsxs("div",{className:"grid grid-cols-2 items-center",children:[e.jsx("p",{className:"font-medium",children:"Tingkat Risiko:"}),e.jsx("p",{children:a.risk_level.name})]}),e.jsxs("div",{className:"grid grid-cols-2 items-center",children:[e.jsx("p",{className:"font-medium",children:"Hasil Skrining:"}),e.jsx("p",{children:a.screening_result})]}),e.jsxs("div",{className:"grid grid-cols-2 items-center",children:[e.jsx("p",{className:"font-medium",children:"BMI:"}),e.jsx("p",{children:a.bmi})]}),e.jsxs("div",{className:"grid grid-cols-2 items-center",children:[e.jsx("p",{className:"font-medium",children:"Tanggal Skrining:"}),e.jsx("p",{children:new Date(a.screening_date).toLocaleDateString("id-ID")})]}),e.jsxs("div",{className:"grid grid-cols-2 items-center",children:[e.jsx("p",{className:"font-medium",children:"Dibuat Pada:"}),e.jsx("p",{children:new Date(a.created_at).toLocaleDateString("id-ID")})]})]}),a.risk_factors.filter(r=>r.pivot.answer===1).length>0&&e.jsxs("div",{className:"space-y-2 p-4 border rounded-lg bg-gray-50/50 md:pl-6",children:[e.jsx("h4",{className:"font-semibold text-lg pb-2 mb-2 border-b-2 border-primary/50 text-primary",children:"Faktor Risiko yang Dijawab"}),e.jsx("ul",{className:"pl-0 space-y-1",children:a.risk_factors.filter(r=>r.pivot.answer===1).map((r,c)=>e.jsx("li",{className:`text-gray-700 pb-2 pt-2 ${c<a.risk_factors.filter(i=>i.pivot.answer===1).length-1?"border-b border-gray-200":""}`,children:r.name},r.id))})]})]}):e.jsx("p",{className:"text-center text-gray-500",children:"Tidak ada detail yang tersedia."})}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-b-lg sticky bottom-0 z-10 flex justify-end",children:e.jsx("button",{onClick:l,className:"btn-modern bg-secondary text-secondary-foreground hover:bg-secondary/90 hover:text-white font-bold text-lg",children:"Tutup"})})]})}):null;function Y({screeningHistories:t,filters:l}){const[a,r]=o.useState(l.search||""),[c,i]=o.useState(!1),[x,m]=o.useState(null),g=s=>{s.preventDefault(),n.index.get({query:{search:a}})},h=s=>{m(s),i(!0)},p=()=>{i(!1),m(null)};return e.jsxs(N,{breadcrumbs:[{title:"Riwayat Skrining",href:n.index.url()}],children:[e.jsx(u,{title:"Riwayat Skrining"}),e.jsxs("div",{className:"container-admin space-y-8",children:[e.jsx("div",{className:"card p-6 md:p-8 flex items-center justify-between",children:e.jsx("h2",{className:"section-title",children:"Riwayat Skrining"})}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("div",{className:"flex gap-2",children:e.jsx(d,{type:"button",className:"btn-modern bg-secondary text-secondary-foreground hover:bg-secondary/90 hover:text-white",onClick:()=>window.open(n.print.url(),"_blank"),children:"Cetak"})})}),e.jsxs("div",{className:"card p-6 md:p-8 space-y-6 min-h-[60vh]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"section-title",children:"Daftar Riwayat Skrining"}),e.jsxs("form",{onSubmit:g,className:"flex gap-2",children:[e.jsx(y,{type:"text",placeholder:"Cari...",value:a,onChange:s=>r(s.target.value),className:"input-modern"}),e.jsx(d,{type:"submit",className:"btn-modern bg-primary text-primary-foreground hover:bg-secondary hover:text-secondary-foreground",children:"Cari"})]})]}),e.jsx("div",{className:"rounded-md border overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-center",children:"Nama Pengguna"}),e.jsx("th",{className:"p-3 text-center",children:"Tingkat Risiko"}),e.jsx("th",{className:"p-3 text-center",children:"Hasil Skrining"}),e.jsx("th",{className:"p-3 text-center",children:"BMI"}),e.jsx("th",{className:"p-3 text-center",children:"Tanggal Skrining"}),e.jsx("th",{className:"p-3 text-center",children:"Aksi"})]})}),e.jsxs("tbody",{children:[t.data.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3 font-medium text-center",children:s.user.name}),e.jsx("td",{className:"p-3 text-center",children:s.risk_level.name}),e.jsx("td",{className:"p-3 text-center",children:s.screening_result}),e.jsx("td",{className:"p-3 text-center",children:s.bmi}),e.jsx("td",{className:"p-3 text-center",children:new Date(s.screening_date).toLocaleDateString("id-ID")}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(d,{size:"sm",className:"btn-modern bg-secondary text-secondary-foreground hover:bg-primary hover:text-primary-foreground",onClick:()=>h(s),children:"Detail"}),e.jsxs(v,{children:[e.jsx(k,{asChild:!0,children:e.jsx(d,{size:"sm",variant:"destructive",className:"btn-modern",children:"Hapus"})}),e.jsxs(D,{className:"max-w-[calc(100%-40%)]",children:[e.jsxs(w,{children:[e.jsx(S,{children:"Anda yakin?"}),e.jsx(A,{children:"Data yang dihapus tidak dapat dikembalikan!"})]}),e.jsxs(_,{children:[e.jsx(C,{children:"Batal"}),e.jsx(I,{onClick:()=>{b.delete(n.destroy.url(s.id),{preserveScroll:!0})},children:"Ya, hapus!"})]})]})]})]})})]},s.id)),t.data.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-3 text-center",children:"No screening histories found."})})]})]})}),t.links&&t.links.length>3&&e.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:t.links.map((s,j)=>e.jsx(f,{href:s.url||"#",className:`px-3 py-1 border rounded-md ${s.active?"bg-primary text-primary-foreground":"bg-background hover:bg-muted"}`,dangerouslySetInnerHTML:{__html:s.label}},j))})]})]}),e.jsx(R,{isOpen:c,onClose:p,history:x})]})}export{Y as default};
