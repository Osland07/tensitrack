import{r as k,u as N,j as e,H as v}from"./app-BYAEZ_EC.js";import{P as y,s as C}from"./ClientLayout-DMeD2mHx.js";import{B as m}from"./index-9spL_MLh.js";import{I as x}from"./input-C7hRWEEK.js";import{L as t}from"./label-CoA5ql7F.js";import{I as o}from"./input-error-BvYBTADV.js";import{R as S,a as p}from"./radio-group-cwzUAaN2.js";import{C as _,a as A,b as B,d as H}from"./card-B2v3DwwS.js";/* empty css            */import"./index-DVXaQy_l.js";import"./index-MWOrctk_.js";import"./index-xn4W-KPB.js";import"./index-BdYKwGFn.js";import"./chevron-down-dryJjirF.js";import"./index-CzpYLOjG.js";import"./index-B3Woc1o1.js";function U({riskFactors:l,riskLevels:T}){const[c,h]=k.useState("questions"),{data:r,setData:d,post:j,processing:u,errors:n,wasSuccessful:D,recentlySuccessful:I}=N({weight:"",height:"",answers:l.map(s=>({risk_factor_id:s.id,answer:!1}))}),g=s=>{if(s.preventDefault(),!r.weight||!r.height){alert("Validasi Gagal: Berat badan dan tinggi badan harus diisi.");return}if(!l.every(a=>r.answers.some(b=>b.risk_factor_id===a.id))){alert("Validasi Gagal: Harap jawab semua pertanyaan risiko.");return}h("confirmation")},f=s=>{s.preventDefault(),j(C().url,{onSuccess:()=>{alert("Skrining Anda telah berhasil disimpan!")},onError:i=>{const a=Object.values(i).flat().join(", ");alert(a||"Terjadi kesalahan saat menyimpan skrining.")}})},w=(s,i)=>{d("answers",r.answers.map(a=>a.risk_factor_id===s?{...a,answer:i}:a))};return e.jsxs(y,{children:[e.jsx(v,{title:"Skrining Hipertensi"}),e.jsx("div",{className:"container mx-auto py-8 px-4",children:e.jsxs(_,{className:"max-w-3xl mx-auto",children:[e.jsxs(A,{children:[e.jsx(B,{className:"text-2xl font-bold text-primary",children:"Skrining Deteksi Dini Hipertensi"}),e.jsx("p",{className:"text-muted-foreground",children:"Isi formulir di bawah ini untuk mengetahui potensi risiko hipertensi Anda."})]}),e.jsxs(H,{children:[c==="questions"&&e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-primary",children:"Data Personal"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"weight",children:"Berat Badan (kg)"}),e.jsx(x,{id:"weight",type:"number",step:"0.1",value:r.weight,onChange:s=>d("weight",s.target.value),required:!0,className:"mt-1"}),e.jsx(o,{message:n.weight,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"height",children:"Tinggi Badan (cm)"}),e.jsx(x,{id:"height",type:"number",step:"0.1",value:r.height,onChange:s=>d("height",s.target.value),required:!0,className:"mt-1"}),e.jsx(o,{message:n.height,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-primary",children:"Faktor Risiko Hipertensi"}),e.jsx("p",{className:"text-muted-foreground",children:"Jawab pertanyaan berikut sesuai kondisi Anda:"}),l.map(s=>{const i=r.answers.find(a=>a.risk_factor_id===s.id)?.answer;return e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx(t,{className:"text-lg font-medium mb-2 block",children:s.name}),e.jsxs(S,{value:i!==void 0?i?"true":"false":void 0,onValueChange:a=>w(s.id,a==="true"),className:"flex space-x-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{value:"true",id:`factor-${s.id}-yes`}),e.jsx(t,{htmlFor:`factor-${s.id}-yes`,children:"Ya"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{value:"false",id:`factor-${s.id}-no`}),e.jsx(t,{htmlFor:`factor-${s.id}-no`,children:"Tidak"})]})]}),e.jsx(o,{message:n[`answers.${s.id}.answer`],className:"mt-2"})]},s.id)})]}),e.jsx(m,{type:"submit",className:"w-full",children:"Lanjutkan ke Konfirmasi"})]}),c==="confirmation"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-primary",children:"Konfirmasi Skrining"}),e.jsx("p",{className:"text-muted-foreground",children:"Harap periksa kembali jawaban Anda sebelum mengirimkan skrining."}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold",children:"Data Personal:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Berat Badan:"})," ",r.weight," kg"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tinggi Badan:"})," ",r.height," cm"]}),e.jsx("h4",{className:"font-semibold mt-4",children:"Faktor Risiko:"}),e.jsx("ul",{className:"list-disc pl-5 space-y-1",children:l.map(s=>{const i=r.answers.find(a=>a.risk_factor_id===s.id)?.answer;return e.jsxs("li",{children:[e.jsxs("strong",{children:[s.name,":"]})," ",i?"Ya":"Tidak"]},s.id)})})]}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>h("questions"),className:"w-full md:w-auto",children:"Kembali"}),e.jsx(m,{type:"button",onClick:f,disabled:u,className:"w-full md:w-auto",children:u?"Memproses...":"Konfirmasi & Selesai"})]}),n&&Object.keys(n).length>0&&e.jsxs("div",{className:"text-sm text-red-500 mt-2",children:[e.jsx("p",{children:"Terjadi kesalahan saat mengirimkan skrining:"}),e.jsx("ul",{children:Object.values(n).flat().map((s,i)=>e.jsx("li",{children:s},i))})]})]})]})]})})]})}export{U as default};
